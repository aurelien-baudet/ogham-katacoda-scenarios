ssh root@host01 'LOGFILE=/var/log/ogham-katacoda-debug.log && STEP_SEPARATOR="" && echo "" > $LOGFILE && STEPSFILE=/var/log/ogham-katacoda-steps.log && echo "Preparing Java and Maven..." >> $STEPSFILE && docker pull maven:3.5.3-jdk-8-slim >> $LOGFILE 2>&1 && alias java="docker run -v $(pwd):$(pwd) -w $(pwd) maven:3.5.3-jdk-8-slim java" && alias mvn="docker run -v $(pwd):$(pwd) -w $(pwd) maven:3.5.3-jdk-8-slim mvn" && echo "Java and Maven are ready !" >> $STEPSFILE && echo $STEP_SEPARATOR >> $STEPSFILE && echo "You can now build using Maven" >> $STEPSFILE && echo $STEP_SEPARATOR >> $STEPSFILE && echo "Downloading Earth for Maven itself ;)" >> $STEPSFILE && echo "   Putting Maven tool dependencies in cache for later use..." >> $STEPSFILE && docker run -v $(pwd):$(pwd) -w $(pwd) maven:3.5.3-jdk-8-slim mvn clean install test verify package >> $LOGFILE 2>&1 && echo "Maven dependencies are downloaded and cached" >> $STEPSFILE && echo $STEP_SEPARATOR >> $STEPSFILE && echo "Starting webmail..." >> $STEPSFILE && docker run -p 143:143 -p 587:587 -p 8000:80 -e ROUNDCUBEMAIL_DEFAULT_HOST=mail -d roundcube/roundcubemail:1.3.4 >> $LOGFILE 2>&1 && echo "Webmail is ready !" >> $STEPSFILE && echo $STEP_SEPARATOR >> $STEPSFILE && echo "You can now try to send your first email by running your code" >> $STEPSFILE'
